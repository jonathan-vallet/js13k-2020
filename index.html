<!doctype html><html lang="fr"><head><meta charset="utf-8"><title>Cardices</title><style type="text/css">.ls{display:flex;flex-direction:column;align-items:center;justify-content:space-around;width:100%;min-height:100vh}.ls:not(.-active){display:none}button{position:relative;display:inline-flex;align-items:center;justify-content:center;padding:10px 40px;max-width:350px;min-height:50px;background:#000;border:0;border-radius:5px;color:#fff;font-size:18px;font-variant:small-caps;text-align:center;cursor:pointer}button[disabled]{cursor:not-allowed;background:#666}p{font-size:20px;color:#fff;font-variant:small-caps}#dl{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;margin:50px;perspective:600px}#dl .d{margin:0 50px}.d{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;width:50px;height:50px;list-style-type:none;transform-style:preserve-3d;transition:transform 1.5s ease-out}.d.or{transition:transform 1.25s ease-out}.df{display:grid;grid-column:1;grid-row:1;grid-template-areas:"a b c" "d e f" "g h i";grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);height:100%;padding:6.25px;width:100%;background:#ccc;border:1px solid #000}.dd{display:block;width:10px;height:10px;align-self:center;justify-self:center;background-color:#000;border-radius:50%}[data-r="1"]{transform:rotateX(360deg) rotateY(720deg) rotateZ(360deg)}[data-r="2"]{transform:rotateX(450deg) rotateY(720deg) rotateZ(360deg)}[data-r="3"]{transform:rotateX(360deg) rotateY(630deg) rotateZ(360deg)}[data-r="4"]{transform:rotateX(360deg) rotateY(810deg) rotateZ(360deg)}[data-r="5"]{transform:rotateX(270deg) rotateY(720deg) rotateZ(360deg)}[data-r="6"]{transform:rotateX(360deg) rotateY(900deg) rotateZ(360deg)}.or[data-r="1"]{transform:rotateX(-360deg) rotateY(-720deg) rotateZ(-360deg)}.or[data-r="2"]{transform:rotateX(-270deg) rotateY(-720deg) rotateZ(-360deg)}.or[data-r="3"]{transform:rotateX(-360deg) rotateY(-810deg) rotateZ(-360deg)}.or[data-r="4"]{transform:rotateX(-360deg) rotateY(-630deg) rotateZ(-360deg)}.or[data-r="5"]{transform:rotateX(-450deg) rotateY(-720deg) rotateZ(-360deg)}.or[data-r="6"]{transform:rotateX(-360deg) rotateY(-900deg) rotateZ(-360deg)}[data-s="1"]{transform:rotate3d(0,0,0,90deg) translateZ(25px)}[data-s="2"]{transform:rotate3d(-1,0,0,90deg) translateZ(25px)}[data-s="3"]{transform:rotate3d(0,1,0,90deg) translateZ(25px)}[data-s="4"]{transform:rotate3d(0,-1,0,90deg) translateZ(25px)}[data-s="5"]{transform:rotate3d(1,0,0,90deg) translateZ(25px)}[data-s="6"]{transform:rotate3d(1,0,0,180deg) translateZ(25px)}.dd:last-child{grid-area:i}[data-s="4"] .dd:nth-child(2),[data-s="5"] .dd:nth-child(2),[data-s="6"] .dd:nth-child(2){grid-area:c}[data-s="6"] .dd:nth-child(3){grid-area:d}[data-s="1"] .dd,[data-s="3"] .dd:nth-child(2),[data-s="5"] .dd:nth-child(3){grid-area:e}[data-s="6"] .dd:nth-child(4){grid-area:f}[data-s="4"] .dd:nth-child(3),[data-s="5"] .dd:nth-child(4),[data-s="6"] .dd:nth-child(5){grid-area:g}#pa{position:absolute;bottom:50px;left:50px}#pa p{position:absolute;opacity:0;font-size:40px;transform:scale(0);transition:all .3s ease}#pa p.-loaded{opacity:1;transform:scale(1)}#oa{position:absolute;top:100px;right:50px}#oa p{position:absolute;opacity:0;font-size:40px;transform:scale(0);transition:all .3s ease}#oa p.-loaded{opacity:1;transform:scale(1)}.c{position:relative}.co{width:150px;height:220px;border-radius:10px;text-align:center;border:2px solid #111;backface-visibility:hidden;perspective-origin:50% 50%;transform-style:preserve-3d;transform-origin:center}.co::before{content:'';display:block;position:absolute;top:10px;left:10px;right:10px;bottom:10px;background:rgba(255,255,255,.3);border-radius:5px;border:1px solid #111}.co.-w{background:#942}.co.-m{background:#18b}.co.-t{background:#449}.co.-a{background:#777}.co.-p{background:#a80}.co.-h{background:#162}.co.-mw{background:linear-gradient(to bottom,#18b 0,#942 100%)}.co.-tw{background:linear-gradient(to bottom,#449 0,#942 100%)}.co.-aw{background:linear-gradient(to bottom,#777 0,#942 100%)}.co.-pw{background:linear-gradient(to bottom,#a80 0,#942 100%)}.co.-hw{background:linear-gradient(to bottom,#162 0,#942 100%)}.co.-mt{background:linear-gradient(to bottom,#18b 0,#449 100%)}.co.-mp{background:linear-gradient(to bottom,#18b 0,#a80 100%)}.co.-hm{background:linear-gradient(to bottom,#162 0,#18b 100%)}.co.-at{background:linear-gradient(to bottom,#777 0,#449 100%)}.co.-pt{background:linear-gradient(to bottom,#a80 0,#449 100%)}.co.-ht{background:linear-gradient(to bottom,#162 0,#449 100%)}.co.-ah{background:linear-gradient(to bottom,#777 0,#162 100%)}.co.-hp{background:linear-gradient(to bottom,#162 0,#a80 100%)}.cr{position:absolute;display:block;bottom:-7px;left:calc(50% - 7px);width:14px;height:14px;transform:rotate(-45deg) skew(15deg,15deg);border:2px solid #111}.cr.r1{background:#38e}.cr.r2{background:#e4f}.cr.r3{background:#fc1}.ce{position:absolute;top:130px;left:20px;right:20px;font-size:14px;font-variant:small-caps}.c__back{position:relative;display:flex;align-items:center;justify-content:center;width:150px;height:220px;border-radius:10px;border:1px solid #111;background-color:#4de;color:#2bc;overflow:hidden;font:bold 150px sans-serif}.c__back:before{content:'4';position:absolute;top:-55px;left:-20px}.c__back:after{content:'4';position:absolute;bottom:-35px;right:-10px}.cl{position:absolute;left:0;right:0;top:-1px;font-size:10px;font-variant:small-caps}.cdl{position:absolute;top:50px;left:0;right:0}.cd{display:inline-block;vertical-align:middle;height:50px;line-height:50px;border:2px dashed #fff;width:50px;border-radius:4px;margin:0 5px;font-size:14px;background:rgba(255,255,255,.4)}.cList{display:grid;width:80%;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));grid-gap:20px}.cList .c{transition:transform .3s ease;perspective:1000px}.cList .c:hover{transform:scale(1.3);z-index:2}#myCardList .c{cursor:pointer}#myCardList .c.-disabled{opacity:.5;cursor:notAllowed}#myDeck{position:absolute;bottom:50px;right:50px;width:150px;height:220px}#myDeck .c{position:absolute;top:0;left:0}#myHand{display:flex;justify-content:center;position:absolute;bottom:200px;left:calc(50% - 395px);width:790px;height:220px}#myHand .c:not(:last-child){margin-right:10px}*{margin:0;padding:0}*,::after,::before{box-sizing:inherit}body{background:#333;box-sizing:border-box}.al{display:flex;justify-content:center}.al>*{width:16.66667%;max-width:200px;transition:transform .3s ease;perspective:1000px}.al>:hover{transform:scale(1.2);z-index:2}.al canvas{width:100%}#mapWrapper{background:#ccc;height:2500px;width:80%;margin:10px 10%;overflow-y:auto}.c-lifeBar__wrapper{display:flex;width:80%;justify-content:space-between}.c-lifeBar{position:relative;width:40%;height:40px;background:#666;border:1px solid #000}.c-lifeBar:last-child{transform:scaleX(-1)}.c-lifeBar>*{position:absolute;top:0;left:0;bottom:0;width:0;background:#44c;transition:width .5s ease}.c-lifeBar :nth-child(2){background:#c44;transition-duration:.3s;transition-delay:1.3s}.c-lifeBar :last-child{background:#4c4;transition-duration:1s;transition-delay:.5s}</style></head><body><div class="ls -active" id="screen-menu"><button class="jsl" data-sc="sg" id="cb">Continue game</button> <button class="jsl" data-sc="scc">New game</button> All cards<div id="allCardList" class="cList"></div><div id="myCardList" class="cList" style="display: none"></div>poison: 🤢 feu: 🥵🔥 glace: 🥶❄ proection: 🛡 stun: 😵🥴 monstres: ☠💀👿😈👹 impact de dégats: 💢💥 heal: ➕ livre: 📖 pages: 📜📃</div><div class="ls" id="scc"><p>Create you hero: pick up 2 classes</p><div id="acl" class="al" data-t0="w" data-t1="w"></div><p>You are:</p><div id="myAvatar"></div><p id="myAvatarName"></p><button class="jsl" data-sc="sm">Start game</button></div><div class="ls" id="sm"><button class="jsl" data-sc="sg">Start game</button><div id="mapWrapper"><canvas id="map"></canvas></div></div><div class="ls" id="sg"><div class="c-lifeBar__wrapper"><div class="c-lifeBar" id="lifeBar-1"><p></p><p></p><p></p></div><div class="c-lifeBar" id="lifeBar-2"><p></p><p></p><p></p></div></div><div id="myHand"></div><div id="myDeck"></div><div id="pa"></div><div id="oa"></div><div id="dl"></div><button type="button" id="etb">End turn</button></div><script>!function(){"use strict";var e=e=>document.getElementById(e),t=e=>document.querySelectorAll(e),a=e=>document.createElement(e),r=()=>Math.random(),i=e=>JSON.parse(window.localStorage.getItem(e)),n=(e,t)=>window.localStorage.setItem(e,JSON.stringify(t)),c=Math.PI,s=2*c;function o(e,t){return~~(r()*(t-e+1))+e}var l={w:"#942",m:"#18b",t:"#449",a:"#777",p:"#a80",h:"#162"};const d={w:"warrior",m:"mage",t:"thief",a:"assassin",p:"protector",h:"heal",mw:"battlemage",tw:"rogue",aw:"slayer",pw:"paladin",hw:"templar",mt:"warlock",am:"dreamkiller",mp:"guardian",hm:"runemaster",at:"ninja",pt:"brigand",ht:"trickster",ap:"ranger",ah:"avenger",hp:"sage"},f={m:{s:"💀"},e:{s:"👿"},b:{s:"😈"},t:{s:"💰"},r:{s:"❓"},s:{s:"🤑"},h:{s:"💖"}};var u=e("allCardList"),h=(e("myCardList"),e("acl")),p=e("myAvatar"),m=e("myAvatarName"),g=e("map"),b=e("cb"),v=e("pa"),y=e("oa"),w=e("myDeck"),$=e("myHand"),k=e("etb"),L=t(".jsl"),T=[],A=[],_=i("deck")||[],x={w1:{dice:"+4",effect:"damage|X",rarity:1},w2:{dice:"even",effect:"damage|X-1",rarity:1},m1:{dice:"+2|2",effect:"magic|X",rarity:2},m2:{dice:"-4",effect:"fire|X",rarity:2},t1:{dice:"6",effect:"split|2",rarity:3},a1:{dice:"double|double",effect:"poison|3",rarity:3},p1:{dice:"-6|-6",effect:"protection|X",rarity:1},h1:{dice:"odd",effect:"heal|X-1",rarity:1},mw1:{dice:"odd",effect:"heal|X-1",rarity:1},pw1:{dice:"-6",effect:"protection|X,damage|1",rarity:1}},E=1;function M(e,t){let a=S(e,t);p.innerHTML="",p.append(a),m.innerText=d[O(e+t)],n("avatar",e+t)}function S(e,t){let r=a("div"),i=a("canvas"),n=i.getContext("2d");return i.width=200,i.height=200,function(e,t,a,r){const i=e.width;var n=t.createLinearGradient(.2*i,.2*i,.6*i,i);n.addColorStop(0,a),n.addColorStop(1,r),C(t,n,.5*i,.6*i,.4*i,0,s),C(t,"#b87",.45*i,.5*i,.25*i,0,s),C(t,"#124",i/1.7,i/2.2,i/35,0,s),C(t,"#124",i/2.2,i/2.2,i/35,0,s)}(i,n,l[e],l[t]),function(e,t,a){const r=e.width;switch(a){case"w":C(t,"#999",.45*r,.5*r,.26*r,1.05*c,1.9*c),q(t,"#999",.33*r,.3*r,.2*r,.2*r,.28*r,.4*r),q(t,"#999",.56*r,.3*r,.7*r,.2*r,.62*r,.4*r);break;case"m":q(t,"#138",.2*r,.3*r,.75*r,.38*r,.5*r,.1*r),q(t,"#138",.28*r,.3*r,.7*r,.38*r,.52*r,0*r);break;case"t":C(t,"#124",.45*r,.5*r,.25*r,1.9*-c,1.1*-c),q(t,"#124",.55*r,.5*r,.7*r,.58*r,.2*r,.58*r);break;case"a":C(t,"#333",.45*r,.5*r,.25*r,2*c,c);break;case"p":C(t,"#999",.45*r,.5*r,.3*r,1.05*c,1.95*c),C(t,"#999",.45*r,.5*r,.27*r,2*c,c);break;case"h":q(t,"#242",.2*r,.3*r,.75*r,.38*r,.5*r,.1*r),q(t,"#242",.28*r,.3*r,.7*r,.38*r,.52*r,0*r)}}(i,n,e),function(e,t,a){const r=e.width;switch(a){case"w":q(t,"#999",.75*r,.47*r,.9*r,.4*r,.86*r,.6*r),q(t,"#421",.6*r,r,.8*r,.4*r,.68*r,r);break;case"m":q(t,"#421",.6*r,r,.8*r,.4*r,.68*r,r),C(t,"#822",.8*r,.42*r,.1*r,0,s);break;case"t":q(t,"#999",.6*r,r,.72*r,.6*r,.68*r,r);break;case"a":C(t,"#111",.7*r,.8*r,.1*r,0,s),q(t,"#111",.7*r,.6*r,.65*r,.8*r,.75*r,.8*r);break;case"p":C(t,"#444",.67*r,.75*r,.14*r,0,s),q(t,"#444",.7*r,.95*r,.42*r,.65*r,.88*r,.6*r);break;case"h":q(t,"#421",.6*r,r,.8*r,.4*r,.68*r,r),C(t,"#481",.8*r,.42*r,.1*r,0,s)}}(i,n,t),X(r),r.append(i),r}function C(e,t,a,r,i,n,c,s){e.fillStyle=t,e.beginPath(),e.arc(a,r,i,n,c,s),e.fill()}function q(e,t,a,r,i,n,c,s){e.fillStyle=t,e.beginPath(),e.moveTo(a,r),e.lineTo(i,n),e.lineTo(c,s),e.fill()}function j(e,t){var r,i,n=x[e],c=O(e),s=`<div class="co -${c}"><p class="cl">${d[c]}</p><span class="cr r${n.rarity}"></span><div class="cdl">`;n.dice.split("|").forEach((e,a)=>{s+=function(e,t,a){let r=e.match(/([-+*]?)([0-9])/),i=e;if(r){var n="";switch(r[1]){case"-":n="max";break;case"+":n="min"}i=""+r[2]+n}return function(e,t){return`<p class="cd"${t?` id=${t}`:""}>${e}</p>`}(e,t&&`${t}-${a}`)}(e,t,a)}),s+=`</div>${r=n.effect,i="",r.split(",").forEach((e,t)=>{i+=t>0?"<br>":"";var a=e.split("|"),r=a[1];switch(a[0]){case"damage":i+=`Inflict <b>${r}</b> damages`;break;case"poison":i+=`Inflict <b>${r}</b> poison damages`;break;case"magic":i+=`Inflict <b>${r}</b> magical damages`;break;case"heal":i+=`Heal <b>${r}</b> life points`;break;case"split":i+=`Split dice in <b>${r}</b>`;break;case"protection":i+=`Add <b>${r}</b> shield`}}),`<p class="ce">${i}</p>`}`;var o=a("div");return o.classList.add("c"),t&&(o.id=t),o.innerHTML=s,o}function O(e){var t=e.replace(/\d+/,"");return t.length<2?t:t[0]==t[1]?t[0]:t[0]<t[1]?t[0]+t[1]:t[1]+t[0]}function X(e){e.addEventListener("mousemove",t=>{let a=t.currentTarget.getBoundingClientRect(),r=Math.max(0,t.pageX-~~a.left),i=Math.max(0,t.pageY-window.scrollY-~~a.top),n=~~a.width,c=~~a.height,s=n/2-r,o=c/2-i,l=Math.sqrt(Math.pow(s,2)+Math.pow(o,2)),d=l/Math.sqrt(Math.pow(n/2,2)+Math.pow(c/2,2));e.querySelector(":first-child").style.transform=`rotate3d(${o/l}, ${-s/l}, 0, ${20*d}deg)`,e.querySelector(":first-child").style.filter=`brightness(${1.2-i/c/2})`}),e.addEventListener("mouseleave",t=>{e.querySelector(":first-child").style.transform="",e.querySelector(":first-child").style.filter=""})}function I(t,a){A.forEach((r,i)=>{x[r].dice.split("|").forEach((r,n)=>{(function(e,t){var a=t.match(/([-+*]?)([0-9])/);if(a){let t=a[2];switch(a[1]){case"-":return e<=t;case"+":return e>=t;default:return t==e}}if("double"===t)return!0;if("odd"===t)return e%2;if("even"===t)return e%2==0})(t,r)&&a(e(`hand-card-${i}-${n}`))})})}var H=100,B=0;function P(e,r){let i=Math.max(0,Math.min(100,B+r));i<=0&&console.log("you lose!"),function(e,t,r){let i=[];for(var n=0;n<~~(1+Math.abs(e-t)/10);++n){var c=a("p");c.innerText=e>t?"➕":"💢",c.style.top=`${o(20,150)}px`,c.style.left=`${o(20,150)}px`,1===r?v.append(c):y.append(c),c.offsetWidth,c.classList.add("-loaded"),i.push(c)}setTimeout(()=>{for(var e of i)e.remove()},500)}(i,B,e),B=i,[...t(`#lifeBar-${e} p`)].forEach(e=>{e.style.width=`${~~(B/H*100)}%`})}setInterval(()=>{P(o(1,2),o(-50,50))},2e3);const N=15;var W,D=[];function J(){var e,t=o(3,4),a=[];for(let i=0;i<t;++i)a.push({e:(e=Array.from("mmmmmeetrrrsh"),e[~~(r()*e.length)])});return a}!function(){D.push([{e:"m"},{e:"m"},{e:"m"}]);for(let e=1;e<N;++e)D.push(J());D.push([{e:"b"}]),function(){for(let n in D){var e=D[n=+n],t=D[n+1];if(t){var a=0;for(let n in e){var i=e[n=+n];if(i.l=[],n===e.length-1)for(;a<t.length;)i.l.push(a++);else i.l.push(a),t.length>a+1&&(++a,r()>.65&&i.l.push(a))}}}}(),function(){let e=g.getContext("2d");e.filter="grayscale(50%)",g.width=900,g.height=150*(N+1);for(let[i,n]of Object.entries(D)){let c=i==D.length-1?60:20;e.font=`${c}px serif`,i=+i;for(let[s,o]of Object.entries(n)){var t=~~(150*(2.25+(s=+s)+.6*r()-n.length/2)),a=~~(g.height-150*(i+.6-.4*r()));o.x=t,o.y=a,e.fillText(f[o.e].s,t-c,a)}}for(let[t,a]of Object.entries(D)){var i=D[1+(t=+t)];if(i)for(let[t,r]of Object.entries(a)){t=+t;for(let t in r.l){let a=i[r.l[t]];e.beginPath(),e.moveTo(r.x+10*t-10,r.y-25),e.lineTo(a.x-12,a.y+10),e.stroke()}}}}()}();var Y,G=0;function R(){[1,2,3,4,6].includes(++G)&&function(t){let i=a("ol");i.classList.add("d"),r()>.5&&i.classList.add("or"),o(1,6);let n="",c="";for(let e=1;e<7;++e)n+=`<li class="df" data-s="${e}">${c+='<span class="dd"></span>'}</li>`;i.innerHTML=n,i.ondragstart=(e=>{I(e.currentTarget.getAttribute("data-r"),e=>{console.log("yuhoi",e),e.style.background="red"})}),i.ondragend=(e=>{I(e.currentTarget.getAttribute("data-r"),e=>{console.log("yuendhoi",e),e.style.background=""})}),e("dl").append(i)}(),document.body.offsetWidth,[...t(".d")].forEach(e=>{e.classList.toggle("or");let t=o(1,6);e.setAttribute("data-r",t);let a=e.querySelector("[draggable]");a&&a.removeAttribute("draggable"),e.querySelector(`[data-s="${t}"]`).setAttribute("draggable","true")}),setTimeout(()=>{!function(){for(var e=0;e<5;++e)K(e)}()},800)}function z(){!function(){for(var e=0;e<A.length;++e)setTimeout(()=>{F(0)},100*e)}(),setTimeout(()=>{R()},500)}function F(e){T.push(A[e]),A.splice(e,1),$.removeChild($.firstElementChild)}function K(e){setTimeout(()=>{_.length||(_=T,T=[],U(),Q()),_.length&&function(e){A.push(_[0]),_.shift();let t=j(e,`hand-card-${$.childElementCount}`);t.addEventListener("drop",e=>{console.log("drop")},!1),t.ondragover=(e=>{e.preventDefault()}),$.append(t),w.removeChild(w.lastElementChild)}(_[0])},100*e)}function Q(){_.forEach((e,t)=>{let r=a("div");r.classList.add("c"),r.innerHTML='<p class="c__back">0</p>',w.append(r),r.style.transition=`all ${t/20}s linear`,r.offsetWidth,r.style.transform=`translate(${2*t}px, ${2*t}px)`})}function U(){for(let e=_.length-1;e>0;e--){const t=o(0,e);[_[e],_[t]]=[_[t],_[e]]}}!function(){for(const t of Object.keys(x)){var e=j(t);X(e),u.append(e)}}(),function(){for(const[e,t]of Object.entries(l)){let t=S(e,e);t.setAttribute("data-t",e),t.onclick=(()=>{var e=t.getAttribute("data-t");h.setAttribute(`data-t${++E%2}`,e),M(h.getAttribute("data-t0"),h.getAttribute("data-t1")),t.classList.add(`-choice${E%2}`)}),h.append(t)}}(),n("deck",_=["w1","w1","w1","w2","w2","m1","m1","m1","m2","m2","mw1"]),[...L].forEach(t=>{t.onclick=(()=>{document.querySelector(".ls.-active").classList.remove("-active");let a=t.getAttribute("data-sc");e(a).classList.add("-active"),"sg"==a?(Y=Object.keys(l),W=Y[o(0,Y.length-1)]+Y[o(0,Y.length-1)],P(1,H),P(2,H),U(),Q(),R(),function(){let e=i("avatar");v.append(S(e[0],e[1]))}(),y.append(S(W[0],W[1]))):"scc"==a&&M("w","w")})}),k.addEventListener("click",z),i("avatar")||b.setAttribute("disabled","disabled")}();</script></body></html>